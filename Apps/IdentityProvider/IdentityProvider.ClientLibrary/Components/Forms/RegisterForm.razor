
@using FluentValidation

@* <MudForm @bind-Validation="@(_mvvmViewModel)"  @ref="@form" Model="@_mvvmViewModel.Data"> *@
<MudForm  Validation="(_mvvmViewModel.Validator.ValidateValue)" @ref="@form" Model="@_mvvmViewModel.Data">
    <MudTextField @bind-Value="_mvvmViewModel.Data.UserName"                              
                  For="@(() => _mvvmViewModel.Data.UserName)"
                  Immediate="true"
                  Required="true"
                  RequiredError="Enter UserName"
                  Label="UserName" 
                  Placeholder="Enter UserName"/>
    <MudTextField @bind-Value="_mvvmViewModel.Data.Email"                              
                  For="@(() => _mvvmViewModel.Data.Email)"
                  Immediate="true"
                  Label="Email" />
    <MudTextField @bind-Value="_mvvmViewModel.Data.Password"                              
                  For="@(() => _mvvmViewModel.Data.Password)"
                  Immediate="true"
                  Label="Password"
                  Required="true"
                  RequiredError="Enter Password"
                  Placeholder="Enter Password"
                  InputType="InputType.Password"/>
    <MudTextField @bind-Value="_mvvmViewModel.Data.ConfirmPassword"                              
                  For="@(() => _mvvmViewModel.Data.ConfirmPassword)"
                  Immediate="true"
                  Label="Confirm Password"
                  Required="true"
                  RequiredError="Confirm Password"
                  Placeholder="Enter ConfirmPassword"
                  InputType="InputType.Password"/>
    <MudNumericField @bind-Value="_mvvmViewModel.Data.Year"                              
                  For="@(() => _mvvmViewModel.Data.Year)"
                  Immediate="true"
                  Label="Age"
                  Required="true"
                  RequiredError="Enter you age"
                  Placeholder="Enter How old are you?"
                  InputType="InputType.Number"/>
    <div class="d-flex align-center justify-space-between">
        <MudCheckBox T="bool" Required="true" RequiredError="You must agree" Label="I agree!"/>
        @* <MudButton OnClick="async () => await  OnValidSubmit()" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Register</MudButton> *@
        <MudButton OnClick="(async () => await OnValidSubmit())" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Register</MudButton>
    </div>
    <div class="d-flex align-center justify-space-between">
        <MudPaper Class="pa-4 mud-height-full">
            <MudText Typo="Typo.subtitle2">@($"Errors ({errors.Length})")</MudText>
            @foreach (var error in errors)
            {
                <MudText Color="@Color.Error">@error</MudText>
            }
        </MudPaper>
    </div>
</MudForm>